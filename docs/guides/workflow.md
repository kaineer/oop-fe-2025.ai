# Процесс генерации учебных документов

## Обзор

Данный документ описывает процесс автоматической генерации учебных материалов на основе метаданных уроков и ролевых спецификаций. Процесс разделен на два типа уроков: теоретические (theory) и практические (practice).

## Структура файлов

### Метаданные уроков
Каждый урок находится в папке `lessons/XX-topic-name/` и содержит файл `meta.yaml` со следующей структурой:

```yaml
lesson:
  number: номер_урока
  title: "Название урока"
  topic: "Тема урока"
  duration: продолжительность_в_минутах
  type: "theory" | "practice"  # тип урока: теория или практика

# Для теоретических уроков:
key_concepts:
  - "Ключевая концепция 1"
  - "Ключевая концепция 2"

fun_facts:
  - "Интересный факт 1"
  - "Интересный факт 2"

learning_objectives:
  - "Цель обучения 1"
  - "Цель обучения 2"

code_examples:
  - "Пример кода 1"
  - "Пример кода 2"

practice_exercises:
  - "Упражнение 1"
  - "Упражнение 2"

# Для практических уроков:
expected_results:
  - "Ожидаемый результат 1"
  - "Ожидаемый результат 2"

project:
  name: "название_проекта"
  description: "Описание проекта"
  steps:
    - name: "Название шага"
      path: "путь/к/шагу"
      commands: "команды для выполнения"
      actions:
        - name: "Действие 1"
          ref: "ссылка_на_ресурс_внутри_шага"
```

#### Отдельно о формате ссылок на ресурсы внутри шага

* как правило, это будет имя файла
* если нужно указать на какой-то фрагмент кода (с последующим добавлением фрагмента в полный текст документа), будет указан filename@fragment-name. При этом в исходном коде для однострочной ссылки будет просто указан комментарий вида "// REF: fragment-name", если же требуется выделить несколько строк, после последней строки будет указан комментарий вида "// ENDREF".
* при вставке кода внутрь документа лекции комментарии REF и ENDREF должны быть удалены

### Ролевые спецификации
Файл `docs/guides/roles.yaml` определяет типы документов для разных аудиторий и типов уроков:

```yaml
roles:
  lesson_guide:
    name: "Краткий конспект"
    lesson_types: ["theory"]
    audience: "Преподаватель"
    purpose: "Структура и ключевые моменты для ведения занятий"
    content:
      - "Ключевые концепции"
      - "Примеры для демонстрации"
      - "Вопросы для обсуждения"
      - "Типичные ошибки"
    tone: "Лаконичный, только факты"
    file_name: "lesson_guide.md"

  full_notes:
    name: "Полный конспект"
    lesson_types: ["theory"]
    audience: "Студенты (пропустившие занятие)"
    purpose: "Полное объяснение темы для тех, кто не смог прийти"
    content:
      - "Теория с примерами"
      - "Пошаговые объяснения"
      - "Дополнительные материалы"
    tone: "Доступный, подробный"
    file_name: "full_notes.md"

  detailed_plan:
    name: "Детальный план занятия"
    lesson_types: ["theory", "practice"]
    audience: "Преподаватель/методист"
    purpose: "Описание пройденных тем с почасовкой"
    content:
      - "Цели и задачи"
      - "Тайминг (по занятиям и парам)"
      - "Материалы и инструменты"
      - "Критерии оценки"
    tone: "Доступный, подробный"
    file_name: "detailed_plan.md"

  task_description:
    name: "Описание задачи"
    lesson_types: ["practice"]
    audience: "Студенты"
    purpose: "Подробное описание задачи для выполнения"
    content:
      - "Описание задачи"
      - "Требования к решению"
      - "Элементы языка, которые желательно использовать"
    tone: "Доступный, подробный"
    file_name: "task_description.md"

  project_steps:
    name: "Шаги проекта"
    lesson_types: ["practice"]
    audience: "Преподаватель"
    purpose: "Описание шагов проекта для выполнения на уроке"
    tone: "Кратко, общие детали"
    content:
      - "Цели каждого шага"
      - "Описание каждого шага"
      - "Ожидаемый результат каждого шага"
    file_name: "project_steps.md"
```

## Процесс для теоретических уроков (type: "theory")

### Шаг 1: Создание промпта
Для каждого теоретического урока создается файл `prompt.md`, который содержит:

1. **Общий контекст урока** - номер, тема, продолжительность, ключевые концепции, интересные факты, цели обучения
2. **Практические упражнения** - список задач из meta.yaml
3. **Спецификации для каждой роли** - аудитория, цель, тон, структура документа, требования к содержанию
4. **Общие требования** - использование только фактов из метаданных, соответствие тону, структурированность

### Шаг 2: Генерация документов
На основе промпта создаются три документа для теоретических уроков:

#### 1. lesson_guide.md (Краткий конспект)
- **Структура**: Ключевые концепции → Примеры → Интересные факты → Вопросы → Типичные ошибки → Упражнения
- **Тон**: Лаконичный, только факты
- **Особенности**: Готовые примеры для демонстрации, проверочные вопросы

#### 2. full_notes.md (Полный конспект)
- **Структура**: Теория → Пошаговые объяснения → Интересные факты → Дополнительные материалы
- **Тон**: Доступный, подробный
- **Особенности**: Детальные разборы упражнений, альтернативные решения, практические советы

#### 3. detailed_plan.md (Детальный план)
- **Структура**: Цели → Тайминг → Материалы → Критерии оценки → Адаптация → Домашнее задание
- **Тон**: Доступный, подробный
- **Особенности**: Почасовой план, критерии оценки, адаптация для разных студентов

### Шаг 3: Валидация и улучшение
После генерации документы проверяются на:
- Соответствие метаданным урока
- Корректность примеров кода
- Практическую применимость упражнений
- Возможность улучшения формулировок

## Процесс для практических уроков (type: "practice")

### Шаг 1: Создание промпта
Для практических уроков промпт включает:

1. **Общий контекст урока** - номер, тема, продолжительность, тип урока, описание проекта, ожидаемые результаты
2. **Практические упражнения** - только этапы проекта, описанные в meta.yaml
3. **Спецификации для ролей** - только для task_description, project_steps и detailed_plan
4. **Общие требования** - использование только фактов из метаданных, практическая ориентация

### Шаг 2: Генерация документов
Для практических уроков создаются три специализированных документа:

#### 1. task_description.md (Описание задачи)
- **Структура**: Описание проекта → Ожидаемые результаты → Требования → Элементы языка → Этапы реализации
- **Тон**: Доступный, подробный
- **Особенности**: Четкие инструкции для студентов, примеры ожидаемого результата

#### 2. project_steps.md (Шаги проекта)
- **Структура**: Обзор проекта → Цели шагов → Пошаговые инструкции → Ожидаемые результаты → Советы
- **Тон**: Кратко, общие детали
- **Особенности**: Практические инструкции для преподавателя, контрольные точки

#### 3. detailed_plan.md (Детальный план занятия)
- **Структура**: Цели → Ожидаемые результаты → Тайминг → Материалы → Критерии оценки → Адаптация
- **Тон**: Доступный, подробный
- **Особенности**: Почасовой план с акцентом на практическую работу

### Шаг 3: Валидация практического задания
Для практических уроков дополнительно проверяются:
- Реализуемость требований в заданные сроки
- Соответствие сложности уровню студентов
- Наличие четких критериев оценки
- Доступность необходимых ресурсов

## Важное правило для практических уроков

### Включение только описанных шагов
**Для практических уроков в документы включаются только те шаги, которые явно описаны в meta.yaml.** 

Это предотвращает путаницу между представлением ИИ о том, что должно быть в уроке, и тем, что фактически планируется преподавателем.

Если в meta.yaml описан только один шаг, то в документах должен присутствовать только этот шаг. Для обозначения будущих этапов можно использовать заглушки вида:
- "... здесь требуется дописать следующий шаг"
- "... планируется добавить на следующих занятиях"
- "... этот этап будет реализован позже"

**Запрещено** включать в документы гипотетические или предполагаемые шаги, которые не описаны в meta.yaml.

## Правила выбора ролей по типу урока

### Теоретические уроки (theory)
Используются следующие роли:
- `lesson_guide` - для преподавателя
- `full_notes` - для студентов
- `detailed_plan` - для методиста

### Практические уроки (practice)
Используются следующие роли:
- `task_description` - для студентов
- `project_steps` - для преподавателя
- `detailed_plan` - для методиста

**Важно**: Для практических уроков роли `lesson_guide` и `full_notes` не используются.

## Рекомендации по использованию

### Для создания нового урока
1. Создать папку `lessons/XX-topic-name/`
2. Заполнить `meta.yaml` согласно структуре, указав тип урока (`theory` или `practice`)
3. Сгенерировать `prompt.md` с учетом типа урока и соответствующих ролей
4. Сгенерировать соответствующие документы ролей
5. Проверить и при необходимости улучшить документы

### Для обновления существующего урока
1. Внести изменения в `meta.yaml`
2. Обновить соответствующие разделы в документах
3. Проверить согласованность изменений
4. Убедиться, что документы соответствуют типу урока

### Ключевые принципы
- **Консистентность**: Все документы должны соответствовать метаданным
- **Практичность**: Упражнения должны быть реалистичными и полезными
- **Адаптивность**: Документы должны учитывать разные уровни подготовки студентов
- **Современность**: Использование актуальных методов и подходов
- **Соответствие типу**: Строгое соблюдение правил выбора ролей по типу урока
- **Точность описания**: Для практических уроков - включение только описанных шагов

## Алиасы для управления шагами уроков

Для автоматизации работы с шагами практических уроков используйте алиасы, описанные в документе [Алиасы для управления шагами](aliases.md).

Основные алиасы:
- `step-copy` - копирование шагов между уроками
- `step-update-meta` - обновление метаданных урока
- `git-commit` - автоматический коммит изменений с информативным сообщением
- `git-push` - коммит и отправка изменений в удаленный репозиторий

## Рекомендуемый workflow с алиасами

### Для практических уроков:
1. `step-copy` - инициализация нового шага
2. `step-update-meta` - обновление метаданных
3. Разработка функционала
4. `git-commit` - сохранение промежуточных результатов
5. `git-push` - финальное сохранение и синхронизация

### Преимущества:
- Автоматизация рутинных операций
- Консистентность структуры проекта
- Информативные сообщения коммитов
- Быстрая синхронизация с удаленным репозиторием

## Дополнительные ресурсы

Для получения более детальных рекомендаций по созданию эффективных промптов и документов, обратитесь к документу [Лучшие практики формирования промптов](prompt_best_practices.md).

## Примеры успешных практик

### Для теоретических уроков
- **Использование альтернативных решений**: В задачах где возможно несколько подходов (например, filter vs slice для массивов), показывать оба варианта с объяснением их преимуществ.
- **Учет контекста**: При объяснении сложных концепций (например, контекста this в функциях), приводить практические примеры и типичные ошибки.
- **Интеграция интересных фактов**: Использовать fun_facts для вовлечения студентов и лучшего запоминания материала.

### Для практических уроков
- **Четкие инструкции**: Предоставлять пошаговые инструкции с ожидаемыми результатами.
- **Практическая ориентация**: Сосредоточиться на создании работающего прототипа.
- **Контрольные точки**: Определять промежуточные этапы для проверки прогресса.
- **Гибкость**: Предоставлять возможность для творчества в рамках проекта.
- **Точность описания**: Включать только те шаги, которые явно описаны в метаданных.

Этот процесс обеспечивает создание качественных, структурированных учебных материалов, адаптированных для разных типов уроков и целей обучения.